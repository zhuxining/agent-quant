# AGENTS.md

This file provides guidance working with code in this repository.

## Module Overview

| Path | Role | Key Notes |
| --- | --- | --- |
| `app/main.py` | FastAPI entry point | Creates the application object and mounts routers. |
| `app/core/` | Configuration and infrastructure | Centralizes settings (`config.py`) and database wiring (`db.py`). |
| `app/quant/` | Agent quant  | Get symbol data, build prompt, LLM agent trading signal, simulated trading |
| `app/api/` | Public HTTP surface | `api.py` aggregates routers; `deps.py` stores shared dependencies; `routes/` hosts feature-specific endpoints. |
| `app/models/` | Domain and persistence models | `base_model.py` defines shared ORM base; `user.py` and `post.py` hold entity definitions. |
| `app/utils/` | Cross-cutting helpers | Reserved for shared utilities referenced across modules. |
| `serve.py` | Local orchestration | Convenience script to launch the app with `uv`. |
| `logs/` | Runtime logs | Daily log files generated by the application. |

## Development Commands

- `uv run serve.py` - Start server
- `uv run ruff check --fix` Format and lint code with Ruff

## Request Flow Notes

- Incoming requests enter through `app/api/routes/*` modules and are registered via `app/api/api.py`.
- Shared dependencies (database sessions, auth context, etc.) live in `app/api/deps.py` and are injected into routes.
- Route handlers call into `app/models/*` for ORM interactions and reuse helpers from `app/utils/` when needed.
- Responses propagate back through the router, letting middleware and exception handlers defined in `app/main.py` finalize the output.

## Update Tips

- When adding a new route, place it in a dedicated module under `app/api/routes/`, export the router, and include it inside `app/api/api.py`.
- Extend `app/models/` with new SQLAlchemy models and keep Pydantic schemas colocated when practical to avoid missing imports.
- Mirror configuration changes across `.env`, `.env.example`, and `app/core/config.py` to ensure consistent environment setup.
- Document new commands or workflows by appending to the relevant sections above to keep this guide authoritative.

## **Important Notes**

- Follow the existing route organization pattern
- Before generated code uses the MCP "context7" to enforce best practices and idiomatic usage
- After the code is generated or modify, run `uv run ruff check --fix` and fix error
- Dialogue in Chinese
